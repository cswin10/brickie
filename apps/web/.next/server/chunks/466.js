exports.id=466,exports.ids=[466],exports.modules={4872:(e,t,r)=>{Promise.resolve().then(r.bind(r,4900))},4900:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(2075),s=r(4334),i=r(3076),l=r(643),o=r(4750),n=r(6762),c=r(9320),d=r(379),u=r(4199),x=r(9216),m=r(8668),p=r(4534),h=r(1398);function f({children:e}){let t=(0,i.useRouter)(),r=(0,i.usePathname)(),[f,b]=(0,s.useState)(!1),{user:w,setUser:g,setProfile:y,isLoading:j,setLoading:N}=(0,h.o)(),T=async()=>{let e=(0,p.e)();await e.auth.signOut(),g(null),y(null),t.push("/login")};if(j)return a.jsx("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-warm-300 border-t-brick-500"})});let k=[{href:"/dashboard",icon:o.Z,label:"New Estimate"},{href:"/dashboard/jobs",icon:n.Z,label:"Saved Jobs"},{href:"/dashboard/settings",icon:c.Z,label:"Settings"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-warm-50 flex",children:[f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>b(!1)}),a.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-warm-200 transform transition-transform lg:transform-none ${f?"translate-x-0":"-translate-x-full"}`,children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-warm-200 flex items-center justify-between",children:[(0,a.jsxs)(l.default,{href:"/dashboard",className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-brick-500 rounded-xl flex items-center justify-center shadow",children:a.jsx(d.Z,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-warm-900",children:"Brickie"})]}),a.jsx("button",{className:"lg:hidden p-2 text-warm-600",onClick:()=>b(!1),children:a.jsx(u.Z,{className:"w-5 h-5"})})]}),a.jsx("nav",{className:"flex-1 p-4 space-y-2",children:k.map(e=>{let t=r===e.href;return(0,a.jsxs)(l.default,{href:e.href,className:`flex items-center space-x-3 px-4 py-3 rounded-xl transition-colors ${t?"bg-brick-50 text-brick-600":"text-warm-600 hover:bg-warm-100"}`,onClick:()=>b(!1),children:[a.jsx(e.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-warm-200",children:[a.jsx("div",{className:"mb-3 px-4",children:a.jsx("p",{className:"text-sm text-warm-600 truncate",children:w?.email})}),(0,a.jsxs)("button",{onClick:T,className:"flex items-center space-x-3 px-4 py-3 w-full rounded-xl text-warm-600 hover:bg-warm-100 transition-colors",children:[a.jsx(x.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Log Out"})]})]})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsxs)("header",{className:"lg:hidden bg-white border-b border-warm-200 px-4 py-3 flex items-center justify-between",children:[a.jsx("button",{onClick:()=>b(!0),className:"p-2 text-warm-600",children:a.jsx(m.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-brick-500 rounded-lg flex items-center justify-center",children:a.jsx(d.Z,{className:"w-4 h-4 text-white"})}),a.jsx("span",{className:"font-bold text-warm-900",children:"Brickie"})]}),a.jsx("div",{className:"w-10"})]}),a.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:e})]})]})}},8962:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(4082),s=r(1101);async function i(e,t){let r=await a.PDFDocument.create(),i=r.addPage([595,842]),{height:l}=i.getSize(),o=await r.embedFont(a.StandardFonts.Helvetica),n=await r.embedFont(a.StandardFonts.HelveticaBold),c=l-50,d=(0,a.rgb)(.2,.2,.2),u=(0,a.rgb)(.4,.4,.4),x=(0,a.rgb)(.73,.27,.17);i.drawText("BRICKIE ESTIMATE",{x:50,y:c,size:24,font:n,color:x}),c-=30,t.companyName&&(i.drawText(t.companyName,{x:50,y:c,size:14,font:n,color:d}),c-=18);let m=new Date(e.timestamp).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});for(let t of(i.drawText(`Date: ${m}`,{x:50,y:c,size:10,font:o,color:u}),c-=25,i.drawText("JOB DETAILS",{x:50,y:c,size:12,font:n,color:d}),c-=18,[`Job Type: ${e.inputs.jobType}`,`Anchor Dimension: ${e.inputs.anchorType} = ${e.inputs.anchorValue}m`,`Difficulty: ${e.inputs.difficulty}`,`Has Openings: ${e.inputs.hasOpenings?"Yes":"No"}`,`Estimated Area: ${e.outputs.area_m2.toFixed(1)} m\xb2`]))i.drawText(t,{x:50,y:c,size:10,font:o,color:d}),c-=18;for(let t of(c-=7,i.drawText("ESTIMATED PRICE",{x:50,y:c,size:12,font:n,color:d}),c-=23,i.drawText((0,s.NO)(e.outputs.recommended_price_gbp_range),{x:50,y:c,size:20,font:n,color:x}),c-=25,i.drawText("LABOUR & MATERIALS",{x:50,y:c,size:12,font:n,color:d}),c-=18,[`Labour: ${(0,s.yS)(e.outputs.labour_hours_range)}`,`Bricks: ${(0,s.nS)(e.outputs.brick_count_range)}`,`Sand: ${(0,s.nS)(e.outputs.materials.sand_kg_range)} kg`,`Cement: ${(0,s.nS)(e.outputs.materials.cement_bags_range)} bags`]))i.drawText(t,{x:50,y:c,size:10,font:o,color:d}),c-=18;if(c-=7,e.outputs.assumptions?.length>0){for(let t of(i.drawText("ASSUMPTIONS",{x:50,y:c,size:12,font:n,color:d}),c-=18,e.outputs.assumptions)){let e=`• ${t}`.substring(0,80);i.drawText(e,{x:50,y:c,size:9,font:o,color:u}),c-=15}c-=7}if(e.outputs.exclusions?.length>0){for(let t of(i.drawText("EXCLUSIONS",{x:50,y:c,size:12,font:n,color:d}),c-=18,e.outputs.exclusions)){let e=`• ${t}`.substring(0,80);i.drawText(e,{x:50,y:c,size:9,font:o,color:u}),c-=15}c-=7}c=Math.max(c,130),i.drawLine({start:{x:50,y:c+10},end:{x:545,y:c+10},thickness:.5,color:(0,a.rgb)(.8,.8,.8)}),c-=10,i.drawText("DISCLAIMER",{x:50,y:c,size:10,font:n,color:u}),c-=15;let p=t.disclaimerText.split(" "),h="";for(let e of p){let t=h+(h?" ":"")+e;o.widthOfTextAtSize(t,8)>495?(i.drawText(h,{x:50,y:c,size:8,font:o,color:u}),c-=12,h=e):h=t}h&&i.drawText(h,{x:50,y:c,size:8,font:o,color:u}),i.drawText("Generated by Brickie App",{x:50,y:40,size:8,font:o,color:(0,a.rgb)(.6,.6,.6)});let f=new Blob([await r.save()],{type:"application/pdf"}),b=URL.createObjectURL(f),w=document.createElement("a");w.href=b,w.download=`brickie-estimate-${e.id}.pdf`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(b)}},1398:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});let a=(0,r(1666).U)((e,t)=>({user:null,profile:null,isLoading:!0,photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,isEstimating:!1,error:null,jobs:[],pricingMethod:"day_rate",dayRate:"220",ratePer1000:"500",ratePerM2:"65",materialMarkup:"10",includeVAT:!1,setUser:t=>e({user:t}),setProfile:t=>{t?e({profile:t,dayRate:t.day_rate?.toString()||"220",pricingMethod:t.default_pricing_method||"day_rate",materialMarkup:t.material_markup?.toString()||"10",includeVAT:t.vat_registered||!1}):e({profile:t})},setLoading:t=>e({isLoading:t}),setPhotoFile:t=>e({photoFile:t}),setPhotoPreview:t=>e({photoPreview:t}),setJobType:t=>e({jobType:t}),setAnchorType:t=>e({anchorType:t}),setAnchorValue:t=>e({anchorValue:t}),setDifficulty:t=>e({difficulty:t}),setHasOpenings:t=>e({hasOpenings:t}),setPricingMethod:t=>e({pricingMethod:t}),setDayRate:t=>e({dayRate:t}),setRatePer1000:t=>e({ratePer1000:t}),setRatePerM2:t=>e({ratePerM2:t}),setMaterialMarkup:t=>e({materialMarkup:t}),setIncludeVAT:t=>e({includeVAT:t}),setCurrentResult:t=>e({currentResult:t}),setEstimating:t=>e({isEstimating:t}),setError:t=>e({error:t}),resetEstimate:()=>e({photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,error:null}),setJobs:t=>e({jobs:t}),addJob:t=>e(e=>({jobs:[t,...e.jobs]})),removeJob:t=>e(e=>({jobs:e.jobs.filter(e=>e.id!==t)})),getInputs:()=>{let{jobType:e,anchorType:r,anchorValue:a,difficulty:s,hasOpenings:i}=t();if(!a)return null;let l=parseFloat(a);return isNaN(l)||l<=0?null:{jobType:e,anchorType:r,anchorValue:l,difficulty:s,hasOpenings:i,pricing:t().getPricingInputs()}},getPricingInputs:()=>{let{pricingMethod:e,dayRate:r,ratePer1000:a,ratePerM2:s,materialMarkup:i,includeVAT:l}=t();return{method:e,dayRate:parseFloat(r)||220,ratePer1000:parseFloat(a)||500,ratePerM2:parseFloat(s)||65,materialMarkup:parseFloat(i)||10,includeVAT:l,vatRate:20}}}))},3768:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var a=r(506);let s=(0,a.createProxy)(String.raw`/home/user/brickie/apps/web/app/(dashboard)/layout.tsx`),{__esModule:i,$$typeof:l}=s;s.default;let o=(0,a.createProxy)(String.raw`/home/user/brickie/apps/web/app/(dashboard)/layout.tsx#default`)}};