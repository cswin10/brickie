"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{9378:function(e,r,t){t.d(r,{MI:function(){return b},Cq:function(){return g},CC:function(){return j},sT:function(){return l},xG:function(){return u},yS:function(){return f},NO:function(){return m},nS:function(){return d},Zn:function(){return p},Ly:function(){return w},vV:function(){return i},eW:function(){return c},ck:function(){return _},ZH:function(){return N}});var n=t(7247);let a=n.Km(["Brickwork","Blockwork","Repointing","Demo+Rebuild"]),s=n.Km(["Easy","Standard","Tricky"]),o=n.Km(["length","height"]);function i(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function c(e){return e.length<8?{valid:!1,message:"Password must be at least 8 characters"}:{valid:!0}}async function l(e){return new Promise((r,t)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>{r(n.result.split(",")[1])},n.onerror=e=>t(e)})}function u(e){return"\xa3".concat(e.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}))}function d(e,r){let t=r||(e=>e.toLocaleString("en-GB"));return"".concat(t(e[0])," – ").concat(t(e[1]))}function m(e){return d(e,u)}function x(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return Math.ceil(e/r*10)/10}function f(e){let r=x(e[0]),t=x(e[1]),n=e[0],a=e[1];return"".concat(n,"–").concat(a," hours (").concat(r,"–").concat(t," days)")}n.Ry({jobType:a,anchorType:o,anchorValue:n.Rx().positive().max(100),difficulty:s,hasOpenings:n.O7(),photoUri:n.Z_().optional(),photoUrl:n.Z_().url().optional()}),n.Ry({area_m2:n.Rx().nonnegative(),brick_count_range:n.bc([n.Rx(),n.Rx()]),materials:n.Ry({sand_kg_range:n.bc([n.Rx(),n.Rx()]),cement_bags_range:n.bc([n.Rx(),n.Rx()]),other:n.IX(n.Z_())}),labour_hours_range:n.bc([n.Rx(),n.Rx()]),recommended_price_gbp_range:n.bc([n.Rx(),n.Rx()]),assumptions:n.IX(n.Z_()),exclusions:n.IX(n.Z_()),notes:n.IX(n.Z_())});let h={BRICK_COST_EACH:.55,BLOCK_COST_EACH:1.8,SAND_COST_PER_KG:.04,CEMENT_BAG_COST:7.5,DEFAULT_DAY_RATE:220,DEFAULT_RATE_PER_1000:500,DEFAULT_RATE_PER_M2:65,HOURS_PER_DAY:8};function b(e,r){let t,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Brickwork",s=(e.brick_count_range[0]+e.brick_count_range[1])/2;e.labour_hours_range[0],e.labour_hours_range[1];let o=(e.materials.sand_kg_range[0]+e.materials.sand_kg_range[1])/2,i=(e.materials.cement_bags_range[0]+e.materials.cement_bags_range[1])/2;switch(r.method){case"day_rate":{let a=r.dayRate||h.DEFAULT_DAY_RATE,s=e.labour_hours_range[0]/h.HOURS_PER_DAY,o=e.labour_hours_range[1]/h.HOURS_PER_DAY;t=s*a,n=o*a;break}case"per_1000_bricks":{let a=r.ratePer1000||h.DEFAULT_RATE_PER_1000;t=e.brick_count_range[0]/1e3*a,n=e.brick_count_range[1]/1e3*a;break}case"per_m2":{let a=r.ratePerM2||h.DEFAULT_RATE_PER_M2;t=.95*e.area_m2*a,n=1.05*e.area_m2*a;break}default:{let a=r.dayRate||h.DEFAULT_DAY_RATE,s=e.labour_hours_range[0]/h.HOURS_PER_DAY,o=e.labour_hours_range[1]/h.HOURS_PER_DAY;t=s*a,n=o*a}}let c=(s*("Blockwork"===a?h.BLOCK_COST_EACH:h.BRICK_COST_EACH)+o*h.SAND_COST_PER_KG+i*h.CEMENT_BAG_COST)*(1+r.materialMarkup/100),l=.9*c,u=1.1*c,d=t+l,m=n+u,x=0,f=0;r.includeVAT&&(x=r.vatRate/100*d,f=r.vatRate/100*m);let b=d+x,_=m+f;return{labourLow:Math.round(t),labourHigh:Math.round(n),materialsLow:Math.round(l),materialsHigh:Math.round(u),subtotalLow:Math.round(d),subtotalHigh:Math.round(m),vatLow:Math.round(x),vatHigh:Math.round(f),totalLow:Math.round(b),totalHigh:Math.round(_)}}async function _(e,r,t){let{data:n,error:a}=await e.from("profiles").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(a)throw console.error("Error updating profile:",a),a;return n}async function g(e,r,t,n,a){let{data:s,error:o}=await e.from("jobs").insert({user_id:r,photo_url:a,inputs:t,outputs:n}).select().single();if(o)throw console.error("Error creating job:",o),o;return s}async function w(e,r){let{data:t,error:n}=await e.from("jobs").select("*").eq("user_id",r).order("created_at",{ascending:!1});return n?(console.error("Error fetching jobs:",n),[]):t||[]}async function p(e,r,t){let{data:n,error:a}=await e.from("jobs").select("*").eq("id",r).eq("user_id",t).single();return a?(console.error("Error fetching job:",a),null):n}async function j(e,r,t){let{error:n}=await e.from("jobs").delete().eq("id",r).eq("user_id",t);return!n||(console.error("Error deleting job:",n),!1)}async function N(e,r,t,n){let a="".concat(r,"/").concat(Date.now(),"-").concat(n),{error:s}=await e.storage.from("job-images").upload(a,t,{cacheControl:"3600",upsert:!1});if(s)return console.error("Error uploading image:",s),null;let{data:o}=e.storage.from("job-images").getPublicUrl(a);return o.publicUrl}},9115:function(e,r,t){t.d(r,{zx:function(){return n.Button},Zb:function(){return a.Card},II:function(){return s.Input},wY:function(){return o.PageLoader},gx:function(){return s.Textarea}});var n=t(6453),a=t(7975),s=t(8301),o=t(1366);t(442)},6453:function(e,r,t){t.d(r,{Button:function(){return s}});var n=t(6517);t(6557);var a=t(3287);function s(e){let{children:r,variant:t="primary",size:s="md",loading:i=!1,fullWidth:c=!1,disabled:l,icon:u,className:d,...m}=e,x=l||i;return(0,n.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-brick-500 text-white hover:bg-brick-600 focus:ring-brick-500":"primary"===t,"bg-warm-200 text-warm-800 hover:bg-warm-300 focus:ring-warm-400":"secondary"===t,"border-2 border-brick-500 text-brick-500 hover:bg-brick-50 focus:ring-brick-500":"outline"===t,"text-brick-500 hover:bg-brick-50 focus:ring-brick-500":"ghost"===t},{"px-3 py-1.5 text-sm min-h-[32px]":"sm"===s,"px-5 py-2.5 text-base min-h-[44px]":"md"===s,"px-6 py-3.5 text-lg min-h-[52px]":"lg"===s},{"w-full":c,"opacity-50 cursor-not-allowed":x},d),disabled:x,...m,children:i?(0,n.jsx)(o,{className:"primary"===t?"text-white":"text-brick-500"}):(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsx)("span",{className:"mr-2",children:u}),r]})})}function o(e){let{className:r}=e;return(0,n.jsxs)("svg",{className:(0,a.W)("animate-spin h-5 w-5",r),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},7975:function(e,r,t){t.d(r,{Card:function(){return s}});var n=t(6517);t(6557);var a=t(3287);function s(e){let{children:r,title:t,className:s,padding:o="md"}=e;return(0,n.jsxs)("div",{className:(0,a.W)("bg-white rounded-2xl shadow-sm",{"p-0":"none"===o,"p-3":"sm"===o,"p-4":"md"===o,"p-6":"lg"===o},s),children:[t&&(0,n.jsx)("h3",{className:"text-base font-semibold text-warm-800 mb-3",children:t}),r]})}},442:function(e,r,t){t.d(r,{Header:function(){return s},Logo:function(){return o}});var n=t(6517);t(6557);var a=t(3287);function s(e){let{title:r,subtitle:t,leftContent:s,rightContent:o,className:i}=e;return(0,n.jsx)("header",{className:(0,a.W)("bg-warm-200 border-b border-warm-300 px-4 py-3",i),children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[s,r&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-lg font-semibold text-warm-900",children:r}),t&&(0,n.jsx)("p",{className:"text-sm text-warm-600",children:t})]})]}),o&&(0,n.jsx)("div",{children:o})]})})}function o(e){let{size:r="md"}=e;return(0,n.jsx)("div",{className:(0,a.W)("bg-brick-500 rounded-xl flex items-center justify-center text-white font-bold shadow-lg",{sm:"w-8 h-8 text-lg",md:"w-10 h-10 text-xl",lg:"w-14 h-14 text-2xl"}[r]),children:"B"})}},8301:function(e,r,t){t.d(r,{Input:function(){return s},Textarea:function(){return o}});var n=t(6517);t(6557);var a=t(3287);function s(e){let{label:r,error:t,suffix:s,containerClassName:o,className:i,...c}=e;return(0,n.jsxs)("div",{className:(0,a.W)("mb-4",o),children:[r&&(0,n.jsx)("label",{className:"block text-sm font-medium text-warm-800 mb-2",children:r}),(0,n.jsxs)("div",{className:(0,a.W)("flex items-center bg-warm-100 rounded-xl border-2 transition-colors",t?"border-red-500":"border-warm-300 focus-within:border-brick-500"),children:[(0,n.jsx)("input",{className:(0,a.W)("flex-1 bg-transparent px-4 py-3 text-warm-900 placeholder-warm-500 outline-none",i),...c}),s&&(0,n.jsx)("span",{className:"pr-4 text-sm text-warm-600",children:s})]}),t&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-500",children:t})]})}function o(e){let{label:r,error:t,containerClassName:s,className:o,...i}=e;return(0,n.jsxs)("div",{className:(0,a.W)("mb-4",s),children:[r&&(0,n.jsx)("label",{className:"block text-sm font-medium text-warm-800 mb-2",children:r}),(0,n.jsx)("textarea",{className:(0,a.W)("w-full bg-warm-100 rounded-xl border-2 px-4 py-3 text-warm-900 placeholder-warm-500 outline-none transition-colors resize-none",t?"border-red-500":"border-warm-300 focus:border-brick-500",o),...i}),t&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-500",children:t})]})}},1366:function(e,r,t){t.d(r,{EstimateLoadingSkeleton:function(){return c},Loader:function(){return s},PageLoader:function(){return o},SkeletonLoader:function(){return i}});var n=t(6517);t(6557);var a=t(3287);function s(e){let{size:r="md",text:t,className:s}=e;return(0,n.jsxs)("div",{className:(0,a.W)("flex flex-col items-center justify-center",s),children:[(0,n.jsx)("div",{className:(0,a.W)("animate-spin rounded-full border-4 border-warm-300 border-t-brick-500",{sm:"w-5 h-5",md:"w-8 h-8",lg:"w-12 h-12"}[r])}),t&&(0,n.jsx)("p",{className:"mt-3 text-sm text-warm-600 animate-pulse",children:t})]})}function o(e){let{text:r="Loading..."}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,n.jsx)(s,{size:"lg",text:r})})}function i(e){let{className:r}=e;return(0,n.jsx)("div",{className:(0,a.W)("animate-pulse bg-warm-200 rounded-lg",r)})}function c(){return(0,n.jsxs)("div",{className:"space-y-4 p-4",children:[(0,n.jsx)(i,{className:"h-6 w-32"}),(0,n.jsx)(i,{className:"h-12 w-full"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i,{className:"h-4 w-20"}),(0,n.jsx)(i,{className:"h-10 w-full"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i,{className:"h-4 w-16"}),(0,n.jsx)(i,{className:"h-8 w-full"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i,{className:"h-4 w-16"}),(0,n.jsx)(i,{className:"h-8 w-full"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i,{className:"h-4 w-24"}),(0,n.jsx)(i,{className:"h-20 w-full"})]})]})}}}]);