(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{8502:function(e,t,r){Promise.resolve().then(r.bind(r,4736))},4736:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(6517),s=r(6557),n=r(8949),l=r(4213),i=r(9781);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(5802).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var c=r(9115),u=r(9250),d=r(1184),m=r(9378);function h(){let{user:e,jobs:t,setJobs:r,removeJob:h}=(0,d.o)(),[p,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{if(!e)return;let t=(0,u.e)();r(await (0,m.Ly)(t,e.id)),f(!1)})()},[e,r]);let x=async t=>{if(!e||!confirm("Are you sure you want to delete this job?"))return;let r=(0,u.e)();await (0,m.CC)(r,t.id,e.id)&&h(t.id)},b=e=>new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return p?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-warm-900 mb-6",children:"Saved Jobs"}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-24 bg-warm-200 rounded-xl animate-pulse"},e))})]}):0===t.length?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-warm-900 mb-6",children:"Saved Jobs"}),(0,a.jsxs)(c.Zb,{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-warm-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-warm-400"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-warm-900 mb-2",children:"No Saved Jobs"}),(0,a.jsx)("p",{className:"text-warm-600 mb-4",children:"Your saved estimates will appear here"}),(0,a.jsx)(n.default,{href:"/dashboard",className:"text-brick-500 font-medium hover:underline",children:"Create your first estimate"})]})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-warm-900 mb-6",children:"Saved Jobs"}),(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)(c.Zb,{padding:"none",className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center p-4",children:[e.photo_url&&(0,a.jsx)("img",{src:e.photo_url,alt:"Job",className:"w-16 h-16 object-cover rounded-lg mr-4"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-warm-900",children:e.inputs.jobType}),(0,a.jsx)("p",{className:"text-brick-500 font-semibold",children:(0,m.NO)(e.outputs.recommended_price_gbp_range)}),(0,a.jsxs)("p",{className:"text-sm text-warm-600",children:[b(e.created_at)," â€¢ ",e.inputs.anchorType,":"," ",e.inputs.anchorValue,"m"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>x(e),className:"p-2 text-warm-400 hover:text-red-500 transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsx)(n.default,{href:"/dashboard/jobs/".concat(e.id),className:"p-2 text-warm-400 hover:text-warm-600",children:(0,a.jsx)(o,{className:"w-5 h-5"})})]})]})},e.id))})]})}},1184:function(e,t,r){"use strict";r.d(t,{o:function(){return a}});let a=(0,r(1447).U)((e,t)=>({user:null,profile:null,isLoading:!0,photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,isEstimating:!1,error:null,jobs:[],pricingMethod:"day_rate",dayRate:"220",ratePer1000:"500",ratePerM2:"65",materialMarkup:"10",includeVAT:!1,setUser:t=>e({user:t}),setProfile:t=>{if(t){var r,a;e({profile:t,dayRate:(null===(r=t.day_rate)||void 0===r?void 0:r.toString())||"220",pricingMethod:t.default_pricing_method||"day_rate",materialMarkup:(null===(a=t.material_markup)||void 0===a?void 0:a.toString())||"10",includeVAT:t.vat_registered||!1})}else e({profile:t})},setLoading:t=>e({isLoading:t}),setPhotoFile:t=>e({photoFile:t}),setPhotoPreview:t=>e({photoPreview:t}),setJobType:t=>e({jobType:t}),setAnchorType:t=>e({anchorType:t}),setAnchorValue:t=>e({anchorValue:t}),setDifficulty:t=>e({difficulty:t}),setHasOpenings:t=>e({hasOpenings:t}),setPricingMethod:t=>e({pricingMethod:t}),setDayRate:t=>e({dayRate:t}),setRatePer1000:t=>e({ratePer1000:t}),setRatePerM2:t=>e({ratePerM2:t}),setMaterialMarkup:t=>e({materialMarkup:t}),setIncludeVAT:t=>e({includeVAT:t}),setCurrentResult:t=>e({currentResult:t}),setEstimating:t=>e({isEstimating:t}),setError:t=>e({error:t}),resetEstimate:()=>e({photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,error:null}),setJobs:t=>e({jobs:t}),addJob:t=>e(e=>({jobs:[t,...e.jobs]})),removeJob:t=>e(e=>({jobs:e.jobs.filter(e=>e.id!==t)})),getInputs:()=>{let{jobType:e,anchorType:r,anchorValue:a,difficulty:s,hasOpenings:n}=t();if(!a)return null;let l=parseFloat(a);return isNaN(l)||l<=0?null:{jobType:e,anchorType:r,anchorValue:l,difficulty:s,hasOpenings:n,pricing:t().getPricingInputs()}},getPricingInputs:()=>{let{pricingMethod:e,dayRate:r,ratePer1000:a,ratePerM2:s,materialMarkup:n,includeVAT:l}=t();return{method:e,dayRate:parseFloat(r)||220,ratePer1000:parseFloat(a)||500,ratePerM2:parseFloat(s)||65,materialMarkup:parseFloat(n)||10,includeVAT:l,vatRate:20}}}))},9250:function(e,t,r){"use strict";r.d(t,{e:function(){return n}});var a=r(2059),s=r(8345);function n(){return(0,a.createBrowserClient)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},5802:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(6557);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:n("lucide",c),...m},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,a.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),o),...c})});return r.displayName="".concat(e),r}},4213:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(5802).Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},9781:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(5802).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8949:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(6951),s=r.n(a)},1447:function(e,t,r){"use strict";r.d(t,{U:function(){return o}});var a=r(6557);let s=e=>{let t;let r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e))},l=t=e(a,s,n);return n},n=e=>e?s(e):s,l=e=>e,i=e=>{let t=n(e),r=e=>(function(e,t=l){let r=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>t(e.getState()),[e,t]),a.useCallback(()=>t(e.getInitialState()),[e,t]));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>e?i(e):i}},function(e){e.O(0,[59,269,951,326,416,963,744],function(){return e(e.s=8502)}),_N_E=e.O()}]);