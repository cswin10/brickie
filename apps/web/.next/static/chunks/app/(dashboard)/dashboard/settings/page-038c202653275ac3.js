(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{8311:function(e,t,r){Promise.resolve().then(r.bind(r,1421))},1421:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(6517),s=r(6557),n=r(1117),i=r(9115),l=r(9250),c=r(1184),o=r(9378);function u(){let{user:e,profile:t,setProfile:r}=(0,c.o)(),[u,d]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[f,h]=(0,s.useState)(""),[p,b]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(t){var e;d(t.company_name||""),x((null===(e=t.day_rate)||void 0===e?void 0:e.toString())||"220"),h(t.disclaimer_text||"This is an estimate only and is subject to site survey. Prices may vary based on actual conditions, material availability, and scope changes.")}},[t]);let w=async()=>{if(e){b(!0),v(!1);try{let t=(0,l.e)(),a=await (0,o.ck)(t,e.id,{company_name:u||null,day_rate:parseFloat(m)||220,disclaimer_text:f||null});a&&(r(a),v(!0),setTimeout(()=>v(!1),3e3))}catch(e){console.error("Failed to save settings:",e)}finally{b(!1)}}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-warm-900 mb-6",children:"Settings"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.Zb,{title:"Account",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-warm-600",children:"Email"}),(0,a.jsx)("p",{className:"font-medium text-warm-900",children:null==e?void 0:e.email})]})}),(0,a.jsxs)(i.Zb,{title:"Company Information",children:[(0,a.jsx)(i.II,{label:"Company Name",placeholder:"Your Company Ltd",value:u,onChange:e=>d(e.target.value)}),(0,a.jsx)(i.II,{label:"Default Day Rate",type:"number",placeholder:"220",value:m,onChange:e=>x(e.target.value),suffix:"GBP/day"})]}),(0,a.jsx)(i.Zb,{title:"PDF Quote Settings",children:(0,a.jsx)(i.gx,{label:"Disclaimer Text",placeholder:"Enter disclaimer text for PDF quotes...",value:f,onChange:e=>h(e.target.value),rows:4})}),(0,a.jsxs)(i.zx,{onClick:w,loading:p,fullWidth:!0,size:"lg",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5 mr-2"}),g?"Saved!":"Save Settings"]}),(0,a.jsx)("p",{className:"text-xs text-warm-500 text-center",children:"Your settings are stored securely and used to personalize your estimates and PDF quotes."})]})]})}},1184:function(e,t,r){"use strict";r.d(t,{o:function(){return a}});let a=(0,r(1447).U)((e,t)=>({user:null,profile:null,isLoading:!0,photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,isEstimating:!1,error:null,jobs:[],pricingMethod:"day_rate",dayRate:"220",ratePer1000:"500",ratePerM2:"65",materialMarkup:"10",includeVAT:!1,setUser:t=>e({user:t}),setProfile:t=>{if(t){var r,a;e({profile:t,dayRate:(null===(r=t.day_rate)||void 0===r?void 0:r.toString())||"220",pricingMethod:t.default_pricing_method||"day_rate",materialMarkup:(null===(a=t.material_markup)||void 0===a?void 0:a.toString())||"10",includeVAT:t.vat_registered||!1})}else e({profile:t})},setLoading:t=>e({isLoading:t}),setPhotoFile:t=>e({photoFile:t}),setPhotoPreview:t=>e({photoPreview:t}),setJobType:t=>e({jobType:t}),setAnchorType:t=>e({anchorType:t}),setAnchorValue:t=>e({anchorValue:t}),setDifficulty:t=>e({difficulty:t}),setHasOpenings:t=>e({hasOpenings:t}),setPricingMethod:t=>e({pricingMethod:t}),setDayRate:t=>e({dayRate:t}),setRatePer1000:t=>e({ratePer1000:t}),setRatePerM2:t=>e({ratePerM2:t}),setMaterialMarkup:t=>e({materialMarkup:t}),setIncludeVAT:t=>e({includeVAT:t}),setCurrentResult:t=>e({currentResult:t}),setEstimating:t=>e({isEstimating:t}),setError:t=>e({error:t}),resetEstimate:()=>e({photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,error:null}),setJobs:t=>e({jobs:t}),addJob:t=>e(e=>({jobs:[t,...e.jobs]})),removeJob:t=>e(e=>({jobs:e.jobs.filter(e=>e.id!==t)})),getInputs:()=>{let{jobType:e,anchorType:r,anchorValue:a,difficulty:s,hasOpenings:n}=t();if(!a)return null;let i=parseFloat(a);return isNaN(i)||i<=0?null:{jobType:e,anchorType:r,anchorValue:i,difficulty:s,hasOpenings:n,pricing:t().getPricingInputs()}},getPricingInputs:()=>{let{pricingMethod:e,dayRate:r,ratePer1000:a,ratePerM2:s,materialMarkup:n,includeVAT:i}=t();return{method:e,dayRate:parseFloat(r)||220,ratePer1000:parseFloat(a)||500,ratePerM2:parseFloat(s)||65,materialMarkup:parseFloat(n)||10,includeVAT:i,vatRate:20}}}))},9250:function(e,t,r){"use strict";r.d(t,{e:function(){return n}});var a=r(2059),s=r(8345);function n(){return(0,a.createBrowserClient)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},5802:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(6557);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:u,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:c?24*Number(l)/Number(s):l,className:n("lucide",o),...m},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:c,...o}=r;return(0,a.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return r.displayName="".concat(e),r}},1117:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(5802).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9115:function(e,t,r){"use strict";r.d(t,{zx:function(){return a.Button},Zb:function(){return s.Card},II:function(){return n.Input},wY:function(){return i.PageLoader},gx:function(){return n.Textarea}});var a=r(6453),s=r(7975),n=r(8301),i=r(1366);r(442)},6453:function(e,t,r){"use strict";r.d(t,{Button:function(){return n}});var a=r(6517);r(6557);var s=r(3287);function n(e){let{children:t,variant:r="primary",size:n="md",loading:l=!1,fullWidth:c=!1,disabled:o,icon:u,className:d,...m}=e,x=o||l;return(0,a.jsx)("button",{className:(0,s.W)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-brick-500 text-white hover:bg-brick-600 focus:ring-brick-500":"primary"===r,"bg-warm-200 text-warm-800 hover:bg-warm-300 focus:ring-warm-400":"secondary"===r,"border-2 border-brick-500 text-brick-500 hover:bg-brick-50 focus:ring-brick-500":"outline"===r,"text-brick-500 hover:bg-brick-50 focus:ring-brick-500":"ghost"===r},{"px-3 py-1.5 text-sm min-h-[32px]":"sm"===n,"px-5 py-2.5 text-base min-h-[44px]":"md"===n,"px-6 py-3.5 text-lg min-h-[52px]":"lg"===n},{"w-full":c,"opacity-50 cursor-not-allowed":x},d),disabled:x,...m,children:l?(0,a.jsx)(i,{className:"primary"===r?"text-white":"text-brick-500"}):(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)("span",{className:"mr-2",children:u}),t]})})}function i(e){let{className:t}=e;return(0,a.jsxs)("svg",{className:(0,s.W)("animate-spin h-5 w-5",t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},7975:function(e,t,r){"use strict";r.d(t,{Card:function(){return n}});var a=r(6517);r(6557);var s=r(3287);function n(e){let{children:t,title:r,className:n,padding:i="md"}=e;return(0,a.jsxs)("div",{className:(0,s.W)("bg-white rounded-2xl shadow-sm",{"p-0":"none"===i,"p-3":"sm"===i,"p-4":"md"===i,"p-6":"lg"===i},n),children:[r&&(0,a.jsx)("h3",{className:"text-base font-semibold text-warm-800 mb-3",children:r}),t]})}},442:function(e,t,r){"use strict";r.d(t,{Header:function(){return n},Logo:function(){return i}});var a=r(6517);r(6557);var s=r(3287);function n(e){let{title:t,subtitle:r,leftContent:n,rightContent:i,className:l}=e;return(0,a.jsx)("header",{className:(0,s.W)("bg-warm-200 border-b border-warm-300 px-4 py-3",l),children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[n,t&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-warm-900",children:t}),r&&(0,a.jsx)("p",{className:"text-sm text-warm-600",children:r})]})]}),i&&(0,a.jsx)("div",{children:i})]})})}function i(e){let{size:t="md"}=e;return(0,a.jsx)("div",{className:(0,s.W)("bg-brick-500 rounded-xl flex items-center justify-center text-white font-bold shadow-lg",{sm:"w-8 h-8 text-lg",md:"w-10 h-10 text-xl",lg:"w-14 h-14 text-2xl"}[t]),children:"B"})}},8301:function(e,t,r){"use strict";r.d(t,{Input:function(){return n},Textarea:function(){return i}});var a=r(6517);r(6557);var s=r(3287);function n(e){let{label:t,error:r,suffix:n,containerClassName:i,className:l,...c}=e;return(0,a.jsxs)("div",{className:(0,s.W)("mb-4",i),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-warm-800 mb-2",children:t}),(0,a.jsxs)("div",{className:(0,s.W)("flex items-center bg-warm-100 rounded-xl border-2 transition-colors",r?"border-red-500":"border-warm-300 focus-within:border-brick-500"),children:[(0,a.jsx)("input",{className:(0,s.W)("flex-1 bg-transparent px-4 py-3 text-warm-900 placeholder-warm-500 outline-none",l),...c}),n&&(0,a.jsx)("span",{className:"pr-4 text-sm text-warm-600",children:n})]}),r&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:r})]})}function i(e){let{label:t,error:r,containerClassName:n,className:i,...l}=e;return(0,a.jsxs)("div",{className:(0,s.W)("mb-4",n),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-warm-800 mb-2",children:t}),(0,a.jsx)("textarea",{className:(0,s.W)("w-full bg-warm-100 rounded-xl border-2 px-4 py-3 text-warm-900 placeholder-warm-500 outline-none transition-colors resize-none",r?"border-red-500":"border-warm-300 focus:border-brick-500",i),...l}),r&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:r})]})}},1366:function(e,t,r){"use strict";r.d(t,{EstimateLoadingSkeleton:function(){return c},Loader:function(){return n},PageLoader:function(){return i},SkeletonLoader:function(){return l}});var a=r(6517);r(6557);var s=r(3287);function n(e){let{size:t="md",text:r,className:n}=e;return(0,a.jsxs)("div",{className:(0,s.W)("flex flex-col items-center justify-center",n),children:[(0,a.jsx)("div",{className:(0,s.W)("animate-spin rounded-full border-4 border-warm-300 border-t-brick-500",{sm:"w-5 h-5",md:"w-8 h-8",lg:"w-12 h-12"}[t])}),r&&(0,a.jsx)("p",{className:"mt-3 text-sm text-warm-600 animate-pulse",children:r})]})}function i(e){let{text:t="Loading..."}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(n,{size:"lg",text:t})})}function l(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,s.W)("animate-pulse bg-warm-200 rounded-lg",t)})}function c(){return(0,a.jsxs)("div",{className:"space-y-4 p-4",children:[(0,a.jsx)(l,{className:"h-6 w-32"}),(0,a.jsx)(l,{className:"h-12 w-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{className:"h-4 w-20"}),(0,a.jsx)(l,{className:"h-10 w-full"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{className:"h-4 w-16"}),(0,a.jsx)(l,{className:"h-8 w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{className:"h-4 w-16"}),(0,a.jsx)(l,{className:"h-8 w-full"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{className:"h-4 w-24"}),(0,a.jsx)(l,{className:"h-20 w-full"})]})]})}},3287:function(e,t,r){"use strict";function a(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{W:function(){return a}})},1447:function(e,t,r){"use strict";r.d(t,{U:function(){return c}});var a=r(6557);let s=e=>{let t;let r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(a,s,n);return n},n=e=>e?s(e):s,i=e=>e,l=e=>{let t=n(e),r=e=>(function(e,t=i){let r=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>t(e.getState()),[e,t]),a.useCallback(()=>t(e.getInitialState()),[e,t]));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},c=e=>e?l(e):l}},function(e){e.O(0,[59,247,378,416,963,744],function(){return e(e.s=8311)}),_N_E=e.O()}]);