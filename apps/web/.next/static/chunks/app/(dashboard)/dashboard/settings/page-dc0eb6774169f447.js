(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{8311:function(e,t,n){Promise.resolve().then(n.bind(n,1421))},1421:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(6517),a=n(6557),s=n(1117),l=n(9115),i=n(9250),o=n(1184),u=n(9378);function c(){let{user:e,profile:t,setProfile:n}=(0,o.o)(),[c,d]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[y,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(t){var e;d(t.company_name||""),f((null===(e=t.day_rate)||void 0===e?void 0:e.toString())||"220"),p(t.disclaimer_text||"This is an estimate only and is subject to site survey. Prices may vary based on actual conditions, material availability, and scope changes.")}},[t]);let x=async()=>{if(e){g(!0),v(!1);try{let t=(0,i.e)(),r=await (0,u.ck)(t,e.id,{company_name:c||null,day_rate:parseFloat(h)||220,disclaimer_text:m||null});r&&(n(r),v(!0),setTimeout(()=>v(!1),3e3))}catch(e){console.error("Failed to save settings:",e)}finally{g(!1)}}};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-warm-900 mb-6",children:"Settings"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(l.Zb,{title:"Account",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-warm-600",children:"Email"}),(0,r.jsx)("p",{className:"font-medium text-warm-900",children:null==e?void 0:e.email})]})}),(0,r.jsxs)(l.Zb,{title:"Company Information",children:[(0,r.jsx)(l.II,{label:"Company Name",placeholder:"Your Company Ltd",value:c,onChange:e=>d(e.target.value)}),(0,r.jsx)(l.II,{label:"Default Day Rate",type:"number",placeholder:"220",value:h,onChange:e=>f(e.target.value),suffix:"GBP/day"})]}),(0,r.jsx)(l.Zb,{title:"PDF Quote Settings",children:(0,r.jsx)(l.gx,{label:"Disclaimer Text",placeholder:"Enter disclaimer text for PDF quotes...",value:m,onChange:e=>p(e.target.value),rows:4})}),(0,r.jsxs)(l.zx,{onClick:x,loading:y,fullWidth:!0,size:"lg",children:[(0,r.jsx)(s.Z,{className:"w-5 h-5 mr-2"}),b?"Saved!":"Save Settings"]}),(0,r.jsx)("p",{className:"text-xs text-warm-500 text-center",children:"Your settings are stored securely and used to personalize your estimates and PDF quotes."})]})]})}},1184:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});let r=(0,n(1447).U)((e,t)=>({user:null,profile:null,isLoading:!0,photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,isEstimating:!1,error:null,jobs:[],setUser:t=>e({user:t}),setProfile:t=>e({profile:t}),setLoading:t=>e({isLoading:t}),setPhotoFile:t=>e({photoFile:t}),setPhotoPreview:t=>e({photoPreview:t}),setJobType:t=>e({jobType:t}),setAnchorType:t=>e({anchorType:t}),setAnchorValue:t=>e({anchorValue:t}),setDifficulty:t=>e({difficulty:t}),setHasOpenings:t=>e({hasOpenings:t}),setCurrentResult:t=>e({currentResult:t}),setEstimating:t=>e({isEstimating:t}),setError:t=>e({error:t}),resetEstimate:()=>e({photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,error:null}),setJobs:t=>e({jobs:t}),addJob:t=>e(e=>({jobs:[t,...e.jobs]})),removeJob:t=>e(e=>({jobs:e.jobs.filter(e=>e.id!==t)})),getInputs:()=>{let{jobType:e,anchorType:n,anchorValue:r,difficulty:a,hasOpenings:s}=t();if(!r)return null;let l=parseFloat(r);return isNaN(l)||l<=0?null:{jobType:e,anchorType:n,anchorValue:l,difficulty:a,hasOpenings:s}}}))},9250:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(2059),a=n(8345);function s(){return(0,r.createBrowserClient)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},5802:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(6557);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,iconNode:d,...h}=e;return(0,r.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:n,strokeWidth:o?24*Number(i)/Number(a):i,className:s("lucide",u),...h},[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let n=(0,r.forwardRef)((n,l)=>{let{className:o,...u}=n;return(0,r.createElement)(i,{ref:l,iconNode:t,className:s("lucide-".concat(a(e)),o),...u})});return n.displayName="".concat(e),n}},1117:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(5802).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1447:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(6557);let a=e=>{let t;let n=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e))},l=t=e(r,a,s);return s},s=e=>e?a(e):a,l=e=>e,i=e=>{let t=s(e),n=e=>(function(e,t=l){let n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},o=e=>e?i(e):i}},function(e){e.O(0,[59,269,326,416,963,744],function(){return e(e.s=8311)}),_N_E=e.O()}]);