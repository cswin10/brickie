(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{8311:function(e,t,a){Promise.resolve().then(a.bind(a,1421))},1421:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(6517),n=a(6557),l=a(1117),i=a(9115),s=a(9250),o=a(1184),u=a(9378);function c(){let{user:e,profile:t,setProfile:a}=(0,o.o)(),[c,d]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[m,f]=(0,n.useState)(""),[g,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(t){var e;d(t.company_name||""),p((null===(e=t.day_rate)||void 0===e?void 0:e.toString())||"220"),f(t.disclaimer_text||"This is an estimate only and is subject to site survey. Prices may vary based on actual conditions, material availability, and scope changes.")}},[t]);let x=async()=>{if(e){y(!0),b(!1);try{let t=(0,s.e)(),r=await (0,u.ck)(t,e.id,{company_name:c||null,day_rate:parseFloat(h)||220,disclaimer_text:m||null});r&&(a(r),b(!0),setTimeout(()=>b(!1),3e3))}catch(e){console.error("Failed to save settings:",e)}finally{y(!1)}}};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-warm-900 mb-6",children:"Settings"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(i.Zb,{title:"Account",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-warm-600",children:"Email"}),(0,r.jsx)("p",{className:"font-medium text-warm-900",children:null==e?void 0:e.email})]})}),(0,r.jsxs)(i.Zb,{title:"Company Information",children:[(0,r.jsx)(i.II,{label:"Company Name",placeholder:"Your Company Ltd",value:c,onChange:e=>d(e.target.value)}),(0,r.jsx)(i.II,{label:"Default Day Rate",type:"number",placeholder:"220",value:h,onChange:e=>p(e.target.value),suffix:"GBP/day"})]}),(0,r.jsx)(i.Zb,{title:"PDF Quote Settings",children:(0,r.jsx)(i.gx,{label:"Disclaimer Text",placeholder:"Enter disclaimer text for PDF quotes...",value:m,onChange:e=>f(e.target.value),rows:4})}),(0,r.jsxs)(i.zx,{onClick:x,loading:g,fullWidth:!0,size:"lg",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),v?"Saved!":"Save Settings"]}),(0,r.jsx)("p",{className:"text-xs text-warm-500 text-center",children:"Your settings are stored securely and used to personalize your estimates and PDF quotes."})]})]})}},1184:function(e,t,a){"use strict";a.d(t,{o:function(){return r}});let r=(0,a(1447).U)((e,t)=>({user:null,profile:null,isLoading:!0,photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,isEstimating:!1,error:null,jobs:[],pricingMethod:"day_rate",dayRate:"220",ratePer1000:"500",ratePerM2:"65",materialMarkup:"10",includeVAT:!1,setUser:t=>e({user:t}),setProfile:t=>{if(t){var a,r;e({profile:t,dayRate:(null===(a=t.day_rate)||void 0===a?void 0:a.toString())||"220",pricingMethod:t.default_pricing_method||"day_rate",materialMarkup:(null===(r=t.material_markup)||void 0===r?void 0:r.toString())||"10",includeVAT:t.vat_registered||!1})}else e({profile:t})},setLoading:t=>e({isLoading:t}),setPhotoFile:t=>e({photoFile:t}),setPhotoPreview:t=>e({photoPreview:t}),setJobType:t=>e({jobType:t}),setAnchorType:t=>e({anchorType:t}),setAnchorValue:t=>e({anchorValue:t}),setDifficulty:t=>e({difficulty:t}),setHasOpenings:t=>e({hasOpenings:t}),setPricingMethod:t=>e({pricingMethod:t}),setDayRate:t=>e({dayRate:t}),setRatePer1000:t=>e({ratePer1000:t}),setRatePerM2:t=>e({ratePerM2:t}),setMaterialMarkup:t=>e({materialMarkup:t}),setIncludeVAT:t=>e({includeVAT:t}),setCurrentResult:t=>e({currentResult:t}),setEstimating:t=>e({isEstimating:t}),setError:t=>e({error:t}),resetEstimate:()=>e({photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,error:null}),setJobs:t=>e({jobs:t}),addJob:t=>e(e=>({jobs:[t,...e.jobs]})),removeJob:t=>e(e=>({jobs:e.jobs.filter(e=>e.id!==t)})),getInputs:()=>{let{jobType:e,anchorType:a,anchorValue:r,difficulty:n,hasOpenings:l}=t();if(!r)return null;let i=parseFloat(r);return isNaN(i)||i<=0?null:{jobType:e,anchorType:a,anchorValue:i,difficulty:n,hasOpenings:l,pricing:t().getPricingInputs()}},getPricingInputs:()=>{let{pricingMethod:e,dayRate:a,ratePer1000:r,ratePerM2:n,materialMarkup:l,includeVAT:i}=t();return{method:e,dayRate:parseFloat(a)||220,ratePer1000:parseFloat(r)||500,ratePerM2:parseFloat(n)||65,materialMarkup:parseFloat(l)||10,includeVAT:i,vatRate:20}}}))},9250:function(e,t,a){"use strict";a.d(t,{e:function(){return l}});var r=a(2059),n=a(8345);function l(){return(0,r.createBrowserClient)(n.env.NEXT_PUBLIC_SUPABASE_URL,n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},5802:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(6557);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:u="",children:c,iconNode:d,...h}=e;return(0,r.createElement)("svg",{ref:t,...i,width:n,height:n,stroke:a,strokeWidth:o?24*Number(s)/Number(n):s,className:l("lucide",u),...h},[...d.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...u}=a;return(0,r.createElement)(s,{ref:i,iconNode:t,className:l("lucide-".concat(n(e)),o),...u})});return a.displayName="".concat(e),a}},1117:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(5802).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1447:function(e,t,a){"use strict";a.d(t,{U:function(){return o}});var r=a(6557);let n=e=>{let t;let a=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),a.forEach(a=>a(t,e))}},n=()=>t,l={setState:r,getState:n,getInitialState:()=>i,subscribe:e=>(a.add(e),()=>a.delete(e))},i=t=e(r,n,l);return l},l=e=>e?n(e):n,i=e=>e,s=e=>{let t=l(e),a=e=>(function(e,t=i){let a=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(a),a})(t,e);return Object.assign(a,t),a},o=e=>e?s(e):s}},function(e){e.O(0,[59,269,326,416,963,744],function(){return e(e.s=8311)}),_N_E=e.O()}]);