(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{2840:function(e,t,a){Promise.resolve().then(a.bind(a,7500))},7500:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(6517),s=a(6557),n=a(6815),l=a(8949),i=a(6882),c=a(4213),o=a(5802);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,o.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),d=(0,o.Z)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);var h=a(508);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),f=(0,o.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var x=a(9250),b=a(1184);function p(e){let{children:t}=e,a=(0,n.useRouter)(),o=(0,n.usePathname)(),[p,w]=(0,s.useState)(!1),{user:y,setUser:g,setProfile:j,isLoading:k,setLoading:v}=(0,b.o)();(0,s.useEffect)(()=>{let e=(0,x.e)();(async()=>{let{data:{user:t}}=await e.auth.getUser();if(!t){a.push("/login");return}g({id:t.id,email:t.email||""});let{data:r}=await e.from("profiles").select("*").eq("id",t.id).single();r&&j(r),v(!1)})();let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{t||a.push("/login")});return()=>t.unsubscribe()},[a,g,j,v]);let N=async()=>{let e=(0,x.e)();await e.auth.signOut(),g(null),j(null),a.push("/login")};if(k)return(0,r.jsx)("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-warm-300 border-t-brick-500"})});let E=[{href:"/dashboard",icon:i.Z,label:"New Estimate"},{href:"/dashboard/jobs",icon:c.Z,label:"Saved Jobs"},{href:"/dashboard/settings",icon:u,label:"Settings"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-warm-50 flex",children:[p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>w(!1)}),(0,r.jsx)("aside",{className:"fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-warm-200 transform transition-transform lg:transform-none ".concat(p?"translate-x-0":"-translate-x-full"),children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-warm-200 flex items-center justify-between",children:[(0,r.jsxs)(l.default,{href:"/dashboard",className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-brick-500 rounded-xl flex items-center justify-center shadow",children:(0,r.jsx)(d,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-xl font-bold text-warm-900",children:"Brickie"})]}),(0,r.jsx)("button",{className:"lg:hidden p-2 text-warm-600",onClick:()=>w(!1),children:(0,r.jsx)(h.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:E.map(e=>{let t=o===e.href;return(0,r.jsxs)(l.default,{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-xl transition-colors ".concat(t?"bg-brick-50 text-brick-600":"text-warm-600 hover:bg-warm-100"),onClick:()=>w(!1),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,r.jsxs)("div",{className:"p-4 border-t border-warm-200",children:[(0,r.jsx)("div",{className:"mb-3 px-4",children:(0,r.jsx)("p",{className:"text-sm text-warm-600 truncate",children:null==y?void 0:y.email})}),(0,r.jsxs)("button",{onClick:N,className:"flex items-center space-x-3 px-4 py-3 w-full rounded-xl text-warm-600 hover:bg-warm-100 transition-colors",children:[(0,r.jsx)(m,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"Log Out"})]})]})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,r.jsxs)("header",{className:"lg:hidden bg-white border-b border-warm-200 px-4 py-3 flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>w(!0),className:"p-2 text-warm-600",children:(0,r.jsx)(f,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-brick-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)(d,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("span",{className:"font-bold text-warm-900",children:"Brickie"})]}),(0,r.jsx)("div",{className:"w-10"})]}),(0,r.jsx)("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:t})]})]})}},1184:function(e,t,a){"use strict";a.d(t,{o:function(){return r}});let r=(0,a(1447).U)((e,t)=>({user:null,profile:null,isLoading:!0,photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,isEstimating:!1,error:null,jobs:[],setUser:t=>e({user:t}),setProfile:t=>e({profile:t}),setLoading:t=>e({isLoading:t}),setPhotoFile:t=>e({photoFile:t}),setPhotoPreview:t=>e({photoPreview:t}),setJobType:t=>e({jobType:t}),setAnchorType:t=>e({anchorType:t}),setAnchorValue:t=>e({anchorValue:t}),setDifficulty:t=>e({difficulty:t}),setHasOpenings:t=>e({hasOpenings:t}),setCurrentResult:t=>e({currentResult:t}),setEstimating:t=>e({isEstimating:t}),setError:t=>e({error:t}),resetEstimate:()=>e({photoFile:null,photoPreview:null,jobType:"Brickwork",anchorType:"length",anchorValue:"",difficulty:"Standard",hasOpenings:!1,currentResult:null,error:null}),setJobs:t=>e({jobs:t}),addJob:t=>e(e=>({jobs:[t,...e.jobs]})),removeJob:t=>e(e=>({jobs:e.jobs.filter(e=>e.id!==t)})),getInputs:()=>{let{jobType:e,anchorType:a,anchorValue:r,difficulty:s,hasOpenings:n}=t();if(!r)return null;let l=parseFloat(r);return isNaN(l)||l<=0?null:{jobType:e,anchorType:a,anchorValue:l,difficulty:s,hasOpenings:n}}}))},9250:function(e,t,a){"use strict";a.d(t,{e:function(){return n}});var r=a(2059),s=a(8345);function n(){return(0,r.createBrowserClient)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},5802:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(6557);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:u,iconNode:d,...h}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:c?24*Number(i)/Number(s):i,className:n("lucide",o),...h},[...d.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:c,...o}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return a.displayName="".concat(e),a}},6882:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(5802).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4213:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(5802).Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},508:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(5802).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8949:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(6951),s=a.n(r)},6815:function(e,t,a){"use strict";var r=a(2346);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},1447:function(e,t,a){"use strict";a.d(t,{U:function(){return c}});var r=a(6557);let s=e=>{let t;let a=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,n={setState:r,getState:s,getInitialState:()=>l,subscribe:e=>(a.add(e),()=>a.delete(e))},l=t=e(r,s,n);return n},n=e=>e?s(e):s,l=e=>e,i=e=>{let t=n(e),a=e=>(function(e,t=l){let a=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(a),a})(t,e);return Object.assign(a,t),a},c=e=>e?i(e):i}},function(e){e.O(0,[59,951,416,963,744],function(){return e(e.s=2840)}),_N_E=e.O()}]);